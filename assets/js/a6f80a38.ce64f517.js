(self.webpackChunkpypesa=self.webpackChunkpypesa||[]).push([[677],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),f=u(n),m=a,d=f["".concat(p,".").concat(m)]||f[m]||l[m]||o;return n?r.createElement(d,s(s({ref:t},c),{},{components:n})):r.createElement(d,s({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=f;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var u=2;u<o;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},620:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return p},toc:function(){return u},default:function(){return l}});var r=n(2122),a=n(9756),o=(n(7294),n(3905)),s=["components"],i={sidebar_position:6},p={unversionedId:"payment_reversal",id:"payment_reversal",isDocsHomePage:!1,title:"Payment Reversal",description:"The Reversal API is used to reverse a successful transaction. Using the Transaction ID of a previously successful transaction,  the OpenAPI will withdraw the funds from the recipient party\u2019s mobile money wallet and revert the funds to the mobile money wallet of the initiating party of the original transaction.",source:"@site/docs/payment_reversal.md",sourceDirName:".",slug:"/payment_reversal",permalink:"/python-pesa/docs/payment_reversal",editUrl:"https://github.com/Kalebu/python-pesa/edit/main/docs/payment_reversal.md",version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Bussiness to bussiness (B2B)",permalink:"/python-pesa/docs/b2b"},next:{title:"Transaction status",permalink:"/python-pesa/docs/transaction_status"}},u=[{value:"Example",id:"example",children:[]}],c={toc:u};function l(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The Reversal API is used to reverse a successful transaction. Using the Transaction ID of a previously successful transaction,  the OpenAPI will withdraw the funds from the recipient party\u2019s mobile money wallet and revert the funds to the mobile money wallet of the initiating party of the original transaction."),(0,o.kt)("p",null,"Use ",(0,o.kt)("em",{parentName:"p"},"payment_reversal()")," method to reverse a transaction in pypesa, the most important thing to consider is the ",(0,o.kt)("strong",{parentName:"p"},"output_TransactionID")," of the previous transaction."),(0,o.kt)("p",null,"For instance if we take a look at json response of a previous b2b transaction we have done above illustrated below;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"{'output_ResponseCode': 'INS-0', 'output_ResponseDesc': 'Request processed successfully', 'output_TransactionID': '4iUThBRRWXMG', 'output_ConversationID': 'f3ca96e7cb7f473a847247d8b887b922', 'output_ThirdPartyConversationID': '8a89835c71f15e99396'}\n")),(0,o.kt)("p",null," We can see the value of ",(0,o.kt)("strong",{parentName:"p"},"output_TransactionID")," to be ",(0,o.kt)("strong",{parentName:"p"},"4iUThBRRWXMG"),", Let's note that and use it reverse that transaction, If you had a different ID just do the same from json response of a transaction you would like to reverse;"),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null," Our code to reverse it, would probably look like this;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},">> import pypesa\n>> mpesa = pypesa()\n>> transaction_query = {\n      'input_ReversalAmount':10,\n      'input_Country': 'TZN',\n      'input_ServiceProviderCode': '000000',\n      'input_ThirdPartyConversationID':'asvf7ba228d83d0d689761',\n      'input_TransactionID':'4iUThBRRWXMG'\n    }\n>> mpesa.payment_reversal(transaction_query)\n\n")))}l.isMDXComponent=!0}}]);